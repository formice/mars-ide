<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" href="../../../component/layui/css/layui.css" />
		<link rel="stylesheet" href="../../../admin/css/pearStep.css" />
		<link rel="stylesheet" href="../../../admin/css/pearForm.css" />
		<link rel="stylesheet" href="../../../admin/css/pearButton.css"/>

		<link rel="stylesheet" type="text/css" href="../../../component/paper-collapse/css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="../../../component/paper-collapse/css/zzsc-demo.css">
		<link rel='stylesheet' href='../../../component/paper-collapse/css/font-awesome.min.css'>
		<link rel="stylesheet" href="../../../component/paper-collapse/css/paper-collapse.min.css">

		<script src="../../../component/paper-collapse/js/jquery-2.1.1.min.js" type="text/javascript"></script>
		<script src="../../../component/paper-collapse/js/paper-collapse.min.js"></script>
		<style>
			.pear-container {
				margin: 10px;
				background-color: whitesmoke;
			}

			.layui-card-body {
				position: relative;
				padding: 0px 0px;
				line-height: 24px;
			}

			.layui-form-label {
				float: left;
				display: block;
				padding: 9px 15px;
				width: 80px;
				font-weight: 200;
				line-height: 10px;
				text-align: right;
				font-size: 12px;
				margin-top: 10px;
				margin-bottom: 10px;
			}

			.layui-input {
				-webkit-appearance: none;
				background-color: #fff;
				background-image: none;
				border-radius: 4px;
				border: 1px solid #dcdfe6;
				box-sizing: border-box;
				color: #606266;
				display: inline-block;
				font-size: inherit;
				height: 30px;
				line-height: 40px;
				outline: none;
				padding: 0 15px;
				transition: border-color .2s cubic-bezier(.645,.045,.355,1);
				width: 100%;
				margin-top: 10px;
				margin-bottom: 10px;
			}

			button, input, optgroup, option, select, textarea {
				font-family: inherit;
				font-size: inherit;
				font-style: inherit;
				font-weight: inherit;
				outline: 0;
				margin-top: 10px;
				margin-bottom: 10px;
			}
		</style>
	</head>
	<body class="pear-container">
		<div class="layui-card">
			<div class="layui-card">
				<div class="layui-card-body" style="padding-top: 60px;height:120px">
					<div class="layui-carousel" id="stepForm" lay-filter="stepForm" style="margin: 0 auto;">
						<div carousel-item id="carousel-item">
							<div>
								<form class="layui-form" action="javascript:void(0);" style="margin: 0 auto;max-width: 460px;padding-top: 60px;">
									<div class="layui-form-item">
										<label class="layui-form-label">名称:</label>
										<div class="layui-input-block">
											<input type="text" name="name" placeholder="请填写工具名称" class="layui-input" lay-verify="number" required />

										</div>
									</div>

									<div class="layui-form-item">
										<label class="layui-form-label">类型:</label>
										<div class="layui-input-block">
											<select id="type" name="type" lay-verify="required">
												<!--<option value="1" selected>保险箱</option>
												<option value="2">现金</option>-->
											</select>
										</div>
									</div>
									<div class="layui-form-item">
										<label class="layui-form-label">网站:</label>
										<div class="layui-input-block">
											<input type="text" name="website" placeholder="请填写工具网址" class="layui-input" lay-verify="number" required />

										</div>
									</div>

									<div class="layui-form-item">
										<label class="layui-form-label">使用帮助:</label>
										<div class="layui-input-block">
											<textarea name="help" placeholder="请填写使用帮助" value="" class="layui-textarea"></textarea>
										</div>
									</div>
									<div class="layui-form-item">
										<div class="layui-input-block">
											<button class="pear-btn pear-btn-success" lay-submit lay-filter="formStep">
												&emsp;下一步&emsp;
											</button>
										</div>
									</div>
								</form>
							</div>
							<div id="step2">
								<div style="text-align: left;margin-top: 5px;">
									<button class="pear-btn pear-btn-success" id="btn-add">添加输入项</button>
									<button class="pear-btn pear-btn-success next">下一步</button>
								</div>
							</div>
							<!--<div>
								<div style="text-align: center;margin-top: 90px;">
									<i class="layui-icon layui-circle" style="color: white;font-size:30px;font-weight:bold;background: #52C41A;padding: 20px;line-height: 80px;">&#xe605;</i>
									<div style="font-size: 24px;color: #333;font-weight: 500;margin-top: 30px;">
										入款成功
									</div>
									<div style="font-size: 14px;color: #666;margin-top: 20px;">预计两小时到账</div>
								</div>
								<div style="text-align: center;margin-top: 50px;">
									<button class="pear-btn pear-btn-success next">再入一笔</button>
									<button class="pear-btn pear-btn-success">查看账单</button>
								</div>
							</div>-->
						</div>
						<div class="layui-card" id="card-add" style="display:none">
							<!--<div class="layui-card-body" style="padding-top: 60px;height: 50px;">-->
							<div class="layui-card-body">
								<form class="layui-form" action="javascript:void(0);">
									<input type="text"  style="display:none" id="toolId" name="toolId" class="layui-input"/>
									<input type="text" style="display:none" id="cate" name="cate" value="16" class="layui-input"/>
									<div class="layui-form-item" style="margin-top:10px;">
										<i class="layui-icon layui-icon-ok-circle" lay-submit lay-filter="add" style="font-size: 30px; color: #1E9FFF;float:right;vertical-align: middle;"></i>
										<label for="name" class="layui-form-label">
											<span class="x-red">*</span>名称</label>
										<div class="layui-input-inline" style="width:100px;">
											<input type="text" id="name" name="name" required="" lay-verify="required" autocomplete="off" class="layui-input"></div>

										<label for="minNum" class="layui-form-label">
											<span class="x-red">*</span>最小个数</label>
										<div class="layui-input-inline" style="width:100px;">
											<input type="text" id="minNum" name="minNum" required="" lay-verify="required" class="layui-input"></div>

										<label for="minNum" class="layui-form-label">
											<span class="x-red">*</span>最大个数</label>
										<div class="layui-input-inline" style="width:100px;">
											<input type="text" id="maxNum" name="maxNum" required="" lay-verify="required" class="layui-input"></div>
										<label for="type" class="layui-form-label">
											<span class="x-red">*</span>类型</label>
										<div class="layui-input-inline" style="width:100px;">
											<select id="type" name="type" class="valid">
												<option value="7">文件</option>
											</select>
										</div>
										<label for="fileFormat" class="layui-form-label">
											<span class="x-red">*</span>文件格式</label>
										<div class="layui-input-inline" style="width:100px;">
											<select id="fileFormat" name="fileFormat" class="valid">
												<option value="8">fasta</option>
												<option value="9">fa</option></select>
										</div>

									</div>

									<div class="layui-form-item">
										<label for="prefix" class="layui-form-label">
											<!--<span class="x-red">*</span>-->前缀</label>
										<div class="layui-input-inline" style="width:100px;">
											<input type="text" id="prefix" name="prefix" required=""  class="layui-input"></div>

										<label for="prefixSplitSymbol" class="layui-form-label">
											<!--<span class="x-red">*</span>-->分隔符</label>
										<div class="layui-input-inline" style="width:100px;">
											<select id="prefixSplitSymbol" name="prefixSplitSymbol" class="valid">
												<option value="10">空格</option></select>
										</div>

										<label for="desc" class="layui-form-label">
											<span class="x-red">*</span>描述</label>
										<div class="layui-input-inline" style="width:100px;">
											<input type="text" id="desc" name="desc" required="" lay-verify="required" class="layui-input"></div>
										<div class="layui-input-inline" style="width:100px;">
											<input type="checkbox" name="isMust" value="1" lay-skin="primary" title="必选项" checked="true">
										</div>
									</div>
								</form>

							</div>
						</div>

						<div class="layui-card" id="card-list" style="display:none">
							<div class="layui-card-body" style="padding-top: 40px;height: 50px;">
								<div class="zzsc-container">
									<section>
										<div class="container">
											<div class="collapse-card">
												<div class="collapse-card__heading">
													<h4 class="collapse-card__title">
														<i class="fa fa-question-circle fa-2x fa-fw"></i>
														Well, hello there
													</h4>
												</div>
												<div class="collapse-card__body">
													Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut
													labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et
													ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum
													dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore
													magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet
													clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
												</div>
											</div>
										</div>
									</section>
								</div>

							</div>
						</div>

					</div>

				</div>
			</div>
		</div>


		<script src="../../../component/layui/layui.js"></script>
		<script>
			layui.use(['form', 'pearStep','element'], function() {
				var   $ = layui.$, form = layui.form, pearStep = layui.pearStep;
				var element = layui.element;
				initSelect($ ,form,'type','tool_type')

				pearStep.render({
					elem: '#stepForm',
					filter: 'stepForm',
					width: '100%', //设置容器宽度
					stepWidth: '750px',
					height: '500px',
					stepItems: [{
						title: '基本信息'
					},{
						title: '输入项'
					}, {
						title: '输出项'
					}, {
						title: '参数'
					}, {
						title: '模板'
					}]
				});

				form.on('submit(formStep)', function(data) {
					alert(1);

					$.ajax({
						url:'http://localhost:8080/tool/add',
						method:'post',
						data:data.field,
						dataType:'JSON',
						success:function(res){
							if(res.code='200'){
								console.log(res);
								//发异步，把数据提交给php
								pearStep.next('#stepForm');
								$('#toolId').val(res.data);
								$('#carousel-item').css("height","50px");
							} else {
								alert(res.msg);
							}
						},
						error:function (data) {

						}
					}) ;

					return false;
				});

				form.on('submit(formStep2)', function(data) {
					pearStep.next('#stepForm');
					return false;
				});

				//监听提交
				form.on('submit(add)',function(data) {
					alert(2);
					$.ajax({
						url:'http://localhost:8080/tool/addInputAndOutput',
						method:'post',
						data:data.field,
						dataType:'JSON',
						success:function(res){
							if(res.code='200'){
								console.log(res);
								//发异步，把数据提交给php
								$('#card-add').hide();

								$('#card-list').show();
							} else {
								alert(res.msg);
							}
						},
						error:function (res) {

						}
					}) ;
					return false;
				});

				$('.pre').click(function() {
					pearStep.pre('#stepForm');
					return false;
				});

				$('.next').click(function() {
					step.next('#stepForm');
				    return false;
				});

				$('#btn-add').click(function () {
					$('#card-add').show();
				});

				//监听折叠
				element.on('collapse(test)', function(data){
					layer.msg('展开状态：'+ data.show);
				});


			});

			function initSelect($,form,ele,group){
					$.ajax({
						//拼接下拉选项
						url:'http://localhost:8080/common/dic/group',
						method:'post',
						data: {'group':group},
						dataType:'JSON',
						success: function (res) {
							if(res.code='200') {
								var data = res.data;
								for (var i in data) {
									$("#"+ele).append('<option value="' + data[i].code + '">' + data[i].name + '</option>');
								}
								form.render('select');
							}
						}
					});
			}



		</script>
	</body>
</html>
